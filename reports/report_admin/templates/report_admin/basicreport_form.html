{% extends 'project_base/base.html' %}
{% load static %}

{% block css %}
{{ block.super }}
  <link href="{% static 'report_admin/css/jquery.tag-editor.css' %}" rel="stylesheet" type="text/css" media="all">
  <link rel="stylesheet" type="text/css" href="{% static 'report_admin/css/list.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'report_admin/css/preview.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'report_admin/css/form.css' %}">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,900|Oswald:300,400,700" rel="stylesheet">
  
 
{% endblock css %}


{% block title %} {{ block.super }} Report Form {% endblock %}

{% block content %}
{{ block.super }}


    <!-- row for header and button -->
    <div class="row headerRow">
      <div class="col-md-12">
        <!-- Header -->
        {% if object %}
          <h1>Edit Your Report</h1>
          <div class="subtitle">
             {{ object }} | Ver {{ object.version }}
          </div>
        {%else%}
          <h1>New Report</h1>
        {% endif %}

      </div>
   </div> <!-- row for header and button end -->

    <div class="card">
      <div class="card-body">
        <form method="POST">
        {% csrf_token %}
        {{ form.media }}
       

        <div class="form-group row">
          <div class="col-md-3">
          </div>


        </div>


        <br>

        <!-- Reviewer -->
        <div class="form-group row">
          <label for="Title" class="col-md-3 col-form-label">Reviewer</label>
          <div class="col-md-9">
            {% if object.version %}
              <small>Change Reviewer below</small>
            {% endif %}
              {{ form.reviewer }}
          </div>
        </div>

        <hr>

        <!-- Title -->
        <div class="form-group row titleRow">
          <label for="Title" class="col-md-3 col-form-label">Title</label>
          <div class="col-md-9">
            {% if object.title %}
              <small>Edit your title below</small>
            {% endif %}

            {{ form.title }}

            {% if form.instance.title_peer_review %}
              <!-- Reviewer Comment Box -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.title_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>

        <br>



        <div class="form-group row">

        </div>
        <br>


        <!-- Executive Summary -->

        <div class="form-group row">
          <label for="Executive Summary" class="col-md-3 col-form-label">Executive Summary</label>
          <div class="col-md-9">
            {% if object.executive_summary %}
              <small id="titleHelp" class="text-muted">
              Edit Executive Summary section below
              </small>
            {% endif %}

            {{ form.executive_summary }}

            {% if form.instance.executive_summary_peer_review %}
            <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.executive_summary_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>

        <div class="form-group row">
          <div class="col-md-3">
          </div>
        </div>
        <br>

        <!-- Introduction -->
        <div class="form-group row">
          <label for="Implications" class="col-md-3 col-form-label">Introduction</label>
          <div class="col-md-9">
            {% if object.introduction %}
              <small id="titleHelp" class="text-muted">
              Edit Introduction section below
              </small>
            {% endif %}

            {{ form.introduction }}

            {% if form.instance.introduction_peer_review %}
            <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.introduction_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>

        <div class="form-group row">
          <div class="col-md-3">
          </div>

        </div>

        <br>

        <!-- Body -->
        <div class="form-group row">
          <label for="Actions" class="col-md-3 col-form-label">Body</label>
          <div class="col-md-9">
            {% if object.body %}
              <small id="titleHelp" class="text-muted">
              Edit Body section below
              </small>
            {% endif %}

            {{ form.body }}

            {% if form.instance.body_peer_review %}
            <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.body_peer_review }}</p>
              </div>
            {% endif %}

          </div>
        </div>

        <div class="form-group row">
          <div class="col-md-3">
          </div>

        </div>


        <br>

        <!-- Conclusion -->
        <div class="form-group row">
          <label for="Technical" class="col-md-3 col-form-label">Conclusion</label>
          <div class="col-md-9">
            {% if object.conclusion %}
              <small id="titleHelp" class="text-muted">
              Edit Conclusion section below
              </small>
            {% endif %}

            {{ form.conclusion }}

            {% if form.instance.conclusion_peer_review %}
              <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.conclusion_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-3">
          </div>

        </div>

        <br>

        <!-- Recommendations -->
        <div class="form-group row">
          <label for="Technical" class="col-md-3 col-form-label">Recommendations</label>
          <div class="col-md-9">
            {% if object.recommendations %}
              <small id="titleHelp" class="text-muted">
              Edit Recommendations section below
              </small>
            {% endif %}

            {{ form.recommendations }}

            {% if form.instance.recommendations_peer_review %}
              <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.recommendations_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-3">
          </div>

        </div>

        <br>


        <!-- References -->
        <div class="form-group row">
          <label for="Technical" class="col-md-3 col-form-label">References</label>
          <div class="col-md-9">
            {% if object.references %}
              <small id="titleHelp" class="text-muted">
              Edit References section below
              </small>
            {% endif %}

            {{ form.references }}

            {% if form.instance.references_peer_review %}
              <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                <p class="reviewerSaid">{{ form.instance.references_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>
        <div class="form-group row">
          <div class="col-md-3">
          </div>

        </div>



        <!-- Tags -->
        <div>
        <div class="form-group row">
          <label for="Tags" class="col-md-3 col-form-label">Tags</label>
          <div class="col-md-9">
            <small id="titleHelp" class="text-muted">Start typing to view tag list, click ENTER to create new</small>

            {{ form.tags_as_string }}

            {% if form.instance.tags_peer_review %}
              <!-- Reviewer comment box  -->
              <div class="reviewerCommentSection">
                  <p class="reviewerSaidHeader">{{ form.instance.reviewer.first_name }} commented:</p>
                  <p class="reviewerSaid">{{ form.instance.tags_peer_review }}</p>
              </div>
            {% endif %}
          </div>
        </div>
        <!-- Tags end -->

        <hr>
        </div>

        <div class="saveSection">
          <!-- <div class="form-group row"> -->
            <div class="d-flex justify-content-end flex-wrap">
              <div class="saveBtn">
                <input name="save_report" type="submit" value="Save" class="btn btn-info btn-md mr-4">
              </div>
              <div class="SavePreviewBtn">
                <input name="preview_report" type="submit" value="Preview" class="btn btn-info btn-md">
              </div>
            </div><!-- Modal -->

          <!-- save section end -->
        </div>

      </form>

<!-- Card body end -->
      </div>

<!-- Card end -->
    </div>
{% endblock content %}

{% block javascript %}
{{ block.super }}
  <script type="text/javascript" src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.10.2/jquery-ui.min.js"></script>
  <script src="{% static 'report_admin/js/jquery.caret.min.js' %}"></script>

  <script 
  type="text/javascript" 
  src="{% static 'report_admin/js/jquery.tag-editor.js' %}"></script>

  <script type="text/javascript">
    $('#tags').tagEditor({
    autocomplete: {
        delay: 0, // show suggestions immediately
        position: { collision: 'flip' }, // automatic menu position up/down
        source: [{% for tag in tags %} "{{tag|upper}}", {% endfor %}]
    },
    forceLowercase: false,
    placeholder: 'Report tags ...'
    });
  </script>
{% endblock javascript %}

